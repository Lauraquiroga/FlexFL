{
    "title": "Selector parsing gets confused by commata in regexes",
    "description": "\nThe selector div, li:matches([0-9,]+) causes a java.util.regex.PatternSyntaxException because  QueryParser (line 63) thinks that the comma inside the regex is a combinator and thus extracts , li:matches([0-9 as the second alternative.\nInstead of scanning ahead with `chompTo(\",\"), the parser needs to parse its way through the alternative until it reaches a comma or the end of a string. That way, commata in regular expressions will be correctly interpreted as part of the regex.\nNote that there may be many more variations of this bug in the parser. Wherever a construct allows embedding an arbitrary string one should expect this problem. [attr=a,b] for example is likely to cause the same issue. In a way, any invocation of chompTo() needs to examined.\n"
}