{
  "issue_id": 7963,
  "issue_url": "https://github.com/apache/rocketmq/issues/7963",
  "title": "[Enhancement] Check the existence of consumer group in updateConsumerOffset to prevent dirty consumer offsets",
  "description_text": "### Before Creating the Enhancement Request\r\n\r\n- [X] I have confirmed that this should be classified as an enhancement rather than a bug/feature.\r\n\r\n\r\n### Summary\r\n\r\nCheck the existence of consumer group in command updateConsumerOffset. Return SUBSCRIPTION_GROUP_NOT_EXIST if the group has been deleted.\r\n\r\n### Motivation\r\n\r\nIn scenarios where consumer group need to be deleted, if deleteSubscriptionGroup admin is called before shutting down the online consumer clients, the consumer offset records, which is dirty, might be kept in broker. This could raise some problems, such as getting incorrect data when calling queryTopicConsumeByWho.  \r\n\r\n<img width=\"1725\" alt=\"image\" src=\"https://github.com/apache/rocketmq/assets/103550934/d8f6a4ca-56c1-47af-b1c5-e9642d5cb2fb\">\r\n<img width=\"579\" alt=\"image\" src=\"https://github.com/apache/rocketmq/assets/103550934/20689d44-c44e-49d8-87f7-4cc39a56ff42\">\r\n\r\n\r\nThis is not the good way to use rmq, but it would occur, and be uncontrollable to broker.\r\n\r\n### Describe the Solution You'd Like\r\n\r\nCheck the existence of consumer group in command updateConsumerOffset. Return SUBSCRIPTION_GROUP_NOT_EXIST if the group has been deleted.\r\n\r\n### Describe Alternatives You've Considered\r\n\r\n/\r\n\r\n### Additional Context\r\n\r\n_No response_"
}